# Инструкция по деплою проекта RoyalTransfer

В этом документе описаны шаги по деплою сайта RoyalTransfer на Vercel и базы данных MySQL на Railway.

## Подготовка проекта

1. Убедитесь, что у вас актуальная версия проекта
2. Создайте файл `.env` на основе `.env.example` в корне проекта

## Деплой MySQL базы данных на Railway

### Регистрация на Railway

1. Перейдите на [Railway.app](https://railway.app) и зарегистрируйтесь или войдите в аккаунт
2. После входа нажмите кнопку "New Project"

### Создание базы данных MySQL

1. В новом проекте выберите "Provision MySQL"
2. Дождитесь завершения создания базы данных
3. После создания базы данных нажмите на нее, чтобы просмотреть её детали
4. В разделе "Connect" вы найдете "Connection URL" - сохраните его, он понадобится для подключения к Vercel

### Загрузка структуры базы данных

1. На своем компьютере откройте MySQL Workbench
2. Нажмите на "+" для создания нового соединения
3. Введите следующие параметры:
   - Connection Name: Railway MySQL
   - Hostname: [хост из Connection URL на Railway]
   - Port: [порт из Connection URL]
   - Username: [имя пользователя из Connection URL]
   - Password: [пароль из Connection URL]
4. Нажмите "Test Connection", чтобы проверить подключение
5. После успешного подключения нажмите "OK"
6. Подключитесь к созданному соединению
7. Перейдите в раздел "File" > "Open SQL Script"
8. Выберите файл `db.sql` из проекта
9. Нажмите кнопку "Execute" (молния) для выполнения скрипта
10. Дождитесь завершения выполнения скрипта
11. Теперь структура базы данных и тестовые данные загружены

## Деплой веб-приложения на Vercel

### Создание проекта на Vercel

1. Перейдите на [Vercel.com](https://vercel.com) и войдите в аккаунт или зарегистрируйтесь
2. После входа нажмите кнопку "Add New..." > "Project"
3. Подключите свой репозиторий с проектом RoyalTransfer
4. Выберите репозиторий из списка

### Настройка переменных окружения

1. На странице настройки проекта перейдите к разделу "Environment Variables"
2. Добавьте следующую переменную:
   - Ключ: `DATABASE_URL`
   - Значение: [скопированный Connection URL с Railway]
3. Другие переменные окружения, если они необходимы

### Настройка деплоя

1. В разделе "Settings" проекта убедитесь, что:
   - Build Command: `npm run build` (или `bun run build`)
   - Output Directory: `.next`
   - Install Command: `npm install` (или `bun install`)
2. Нажмите "Deploy" для запуска деплоя
3. Дождитесь завершения деплоя (обычно занимает 1-2 минуты)
4. После успешного деплоя Vercel предоставит URL для доступа к вашему сайту

## Проверка сайта после деплоя

1. Перейдите по URL, предоставленному Vercel
2. Убедитесь, что сайт корректно работает
3. Проверьте, что админ-панель доступна по пути `/admin`
   - Логин: не требуется
   - Пароль: `admin123` (для демонстрационных целей)
4. Протестируйте изменение номера телефона через админ-панель
5. Проверьте, что номер телефона обновляется во всех разделах сайта

## Дополнительные настройки

### Настройка пользовательского домена на Vercel

1. В настройках проекта на Vercel перейдите к разделу "Domains"
2. Нажмите "Add" и введите свой домен
3. Следуйте инструкциям Vercel для настройки DNS-записей

### Обновление пароля администратора

По умолчанию пароль администратора установлен как `admin123`. В продакшн-среде рекомендуется изменить его:

1. Откройте файл `src/app/admin/layout.tsx`
2. Измените значение константы `ADMIN_PASSWORD` на более сложный пароль
3. Сделайте новый деплой проекта

## Поддержка и обновление

- В случае обновления структуры базы данных, вам потребуется выполнить новый SQL-скрипт на Railway
- Для добавления новых функций или исправления ошибок, обновите код в репозитории и выполните повторный деплой на Vercel
